<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="George Savva" />


<title>JIC MSc Workshop: Analysis Walkthrough</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R for Statistics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Intro to R for Statistics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="day1.html">Part 1</a>
    </li>
    <li>
      <a href="day2.html">Part 2</a>
    </li>
    <li>
      <a href="workshopscript.html">JIC MSc Workshop</a>
    </li>
    <li>
      <a href="flipbook.html">ggplot example</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Statistics notes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dichot.html">Don't group your data points</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:george.savva@quadram.ac.uk">
    <span class="fa fa-envelope-o"></span>
     
    Contact me
  </a>
</li>
<li>
  <a href="https://github.com/georgemsavva">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">JIC MSc Workshop: Analysis Walkthrough</h1>
<h4 class="author">George Savva</h4>
<h4 class="date">March 2022</h4>

</div>


<div id="motivation" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Motivation</h1>
<p>We have an Excel spreadsheet with data corresponding to a rehabilitation intervention for stroke patients.</p>
<p>Hospital patients were recruited from five hospital departments and were randomised to either standard care or an experimental treatment. The time they took to complete a walking speed task was recorded as the outcome.</p>
<p>The dataset is here <a href="./walkingspeed.xlsx">walkingspeed.xlsx</a>:</p>
<p>Here we report an analysis of this dataset.</p>
<p>We will answer the following questions:</p>
<ul>
<li>What is the mean and standard deviation of walking speed in each treatment group?</li>
<li>Does the treatment improve walking speed?</li>
<li>Is the treatment effect different between men and women?</li>
</ul>
<p>Our workflow is typical of most staistical analyses:</p>
<ul>
<li>Load data</li>
<li>Wrangle</li>
<li>Describe</li>
<li>Visualise</li>
<li>Clean and recode</li>
<li>Test and model</li>
<li>Report</li>
</ul>
</div>
<div id="load-libraries" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Load libraries</h1>
<pre class="r"><code>library(ggplot2)
library(dplyr)
library(data.table)
library(readxl)</code></pre>
</div>
<div id="load-data" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Load data</h1>
<p>We should inspect the data in Excel. Note there are three sheets that we need to combine. We need to lead</p>
<pre class="r"><code>treated &lt;- read_excel(path=&quot;walkingspeed.xlsx&quot;, 
                      sheet = &quot;treated&quot;,
                      range = &quot;A1:B68&quot;)</code></pre>
<p>Notes: * The library readxl for reading Excel sheets. There are alternatives but I find this works well. * Multiline function call * Named arguments * Assigning the outcome to the variable * Help file, how did we know how this function worked.</p>
<p>We need to load all three sheets as separate data frames.</p>
<pre class="r"><code>control &lt;- read_excel(path=&quot;walkingspeed.xlsx&quot;, 
                      sheet = &quot;control&quot;,
                      range = &quot;A1:B70&quot;)

metadata &lt;- read_excel(path=&quot;walkingspeed.xlsx&quot;, 
                      sheet = &quot;meta&quot;,
                      range = &quot;A1:D139&quot;)</code></pre>
</div>
<div id="explore-data" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Explore data</h1>
<p>R includes several functions to inspect data</p>
<pre class="r"><code>class(treated)</code></pre>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<pre class="r"><code>str(treated)</code></pre>
<pre><code>## tibble [67 x 2] (S3: tbl_df/tbl/data.frame)
##  $ patid: num [1:67] 1 3 5 7 9 11 13 15 17 19 ...
##  $ time : chr [1:67] &quot;1.8975120000000001&quot; &quot;2.927432&quot; &quot;2.2042579999999998&quot; &quot;2.1441910000000002&quot; ...</code></pre>
<pre class="r"><code>summary(treated)</code></pre>
<pre><code>##      patid         time          
##  Min.   :  1   Length:67         
##  1st Qu.: 34   Class :character  
##  Median : 67   Mode  :character  
##  Mean   : 67                     
##  3rd Qu.:100                     
##  Max.   :133</code></pre>
<pre class="r"><code>head(treated)</code></pre>
<pre><code>## # A tibble: 6 x 2
##   patid time              
##   &lt;dbl&gt; &lt;chr&gt;             
## 1     1 1.8975120000000001
## 2     3 2.927432          
## 3     5 2.2042579999999998
## 4     7 2.1441910000000002
## 5     9 1.7203250000000001
## 6    11 2.1476410000000001</code></pre>
<pre class="r"><code># View(treated)
str(control)</code></pre>
<pre><code>## tibble [69 x 2] (S3: tbl_df/tbl/data.frame)
##  $ patid   : num [1:69] 2 4 6 8 10 12 14 16 18 20 ...
##  $ walktime: num [1:69] 3.54 1.82 3.04 2.47 2.48 ...</code></pre>
<p>Notes: * Data can be numeric, character strings, (factors or logical)</p>
</div>
<div id="access-elements-from-the-dataframe" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Access elements from the dataframe</h1>
<pre class="r"><code>control$walktime</code></pre>
<pre><code>##  [1]   3.537158   1.819787   3.038065   2.469580   2.483921   2.440482   2.779616   3.739146   1.956132   5.415308   3.067604
## [12] 185.362000   2.690378   0.015400   2.716427   1.952741   2.707647   5.056214   3.319593   1.493927   2.654815   2.856972
## [23]   2.401613   1.714169   3.183433   2.897221  10.590513   2.572139   2.380559   3.528461  12.168967   2.274398   2.631071
## [34]   2.524958   2.191847   3.943916   3.390101   5.146895   2.426002   3.340182   2.392610   2.375177   2.210679   3.344224
## [45]   2.233431   2.749903   3.361010   2.803598   4.499523   3.642821   2.225054   2.318357   2.241562   2.498969   2.378422
## [56]   2.370767   2.169139   2.373494   2.959015   3.881843   2.296210   3.075860   5.033359   2.870730   3.980520   2.290122
## [67]   1.843314   2.083927   2.778637</code></pre>
<pre class="r"><code>control$walktime[1]</code></pre>
<pre><code>## [1] 3.537158</code></pre>
<pre class="r"><code>control$walktime[1:10]</code></pre>
<pre><code>##  [1] 3.537158 1.819787 3.038065 2.469580 2.483921 2.440482 2.779616 3.739146 1.956132 5.415308</code></pre>
<pre class="r"><code>mean(control$walktime)</code></pre>
<pre><code>## [1] 5.712487</code></pre>
<pre class="r"><code>mean(control$walktime[1:5])</code></pre>
<pre><code>## [1] 2.669702</code></pre>
<pre class="r"><code>log(control$walktime)</code></pre>
<pre><code>##  [1]  1.2633236  0.5987195  1.1112208  0.9040481  0.9098384  0.8921956  1.0223128  1.3188572  0.6709691  1.6892298  1.1208968
## [12]  5.2223107  0.9896817 -4.1733878  0.9993174  0.6692340  0.9960800  1.6206180  1.1998422  0.4014082  0.9763750  1.0497623
## [23]  0.8761406  0.5389284  1.1579602  1.0637520  2.3599586  0.9447378  0.8673353  1.2608618  2.4988890  0.8217154  0.9673910
## [34]  0.9262244  0.7847446  1.3721741  1.2208597  1.6383936  0.8862446  1.2060253  0.8723848  0.8650720  0.7932997  1.2072347
## [45]  0.8035390  1.0115656  1.2122415  1.0309036  1.5039714  1.2927584  0.7997812  0.8408587  0.8071729  0.9158782  0.8664372
## [56]  0.8632135  0.7743303  0.8643631  1.0848564  1.3563100  0.8312599  1.1235845  1.6160876  1.0545664  1.3814125  0.8286051
## [67]  0.6115650  0.7342541  1.0219605</code></pre>
<pre class="r"><code>log(control$walktime[1:5])</code></pre>
<pre><code>## [1] 1.2633236 0.5987195 1.1112208 0.9040481 0.9098384</code></pre>
</div>
<div id="wrangle" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Wrangle</h1>
<p>For analysis we will need all the data into one data frame. We need to append (row bind) the treatment and control results, then merge (join) the meta data.</p>
<pre class="r"><code># Remind ourselves of the structure of the dataset
str(treated)</code></pre>
<pre><code>## tibble [67 x 2] (S3: tbl_df/tbl/data.frame)
##  $ patid: num [1:67] 1 3 5 7 9 11 13 15 17 19 ...
##  $ time : chr [1:67] &quot;1.8975120000000001&quot; &quot;2.927432&quot; &quot;2.2042579999999998&quot; &quot;2.1441910000000002&quot; ...</code></pre>
<pre class="r"><code>str(control)</code></pre>
<pre><code>## tibble [69 x 2] (S3: tbl_df/tbl/data.frame)
##  $ patid   : num [1:69] 2 4 6 8 10 12 14 16 18 20 ...
##  $ walktime: num [1:69] 3.54 1.82 3.04 2.47 2.48 ...</code></pre>
<p>We need to make sure the vectors we are merging have the same type and name</p>
<p>There are a lot of ways to do the same thing!</p>
<pre class="r"><code># Base R
treated$walktime &lt;- as.numeric(treated$time)</code></pre>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre class="r"><code># data.table
setDT(treated)
treated[ , walktime := as.numeric(time)  ]</code></pre>
<pre><code>## Warning in eval(jsub, SDenv, parent.frame()): NAs introduced by coercion</code></pre>
<pre class="r"><code># tidyverse
treated &lt;- treated %&gt;% mutate(walktime = as.numeric(time))</code></pre>
<pre><code>## Warning in mask$eval_all_mutate(quo): NAs introduced by coercion</code></pre>
<p>Now we can append the rows:</p>
<pre class="r"><code># data.table
combined &lt;- rbind(treated, control, fill=TRUE)
# tidyverse
combined &lt;- bind_rows(treated, control)
combined &lt;- bind_rows(treated = treated, 
                      control = control, 
                      .id = &quot;group&quot;)

str(metadata)</code></pre>
<pre><code>## tibble [138 x 4] (S3: tbl_df/tbl/data.frame)
##  $ patient   : num [1:138] 1 2 3 4 5 6 7 8 9 10 ...
##  $ sex       : chr [1:138] &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; ...
##  $ age       : num [1:138] 53 61 65 48 62 62 57 57 57 55 ...
##  $ department: num [1:138] 3 3 1 2 2 4 2 4 3 2 ...</code></pre>
<pre class="r"><code>str(combined)</code></pre>
<pre><code>## Classes &#39;data.table&#39; and &#39;data.frame&#39;:   136 obs. of  4 variables:
##  $ group   : chr  &quot;treated&quot; &quot;treated&quot; &quot;treated&quot; &quot;treated&quot; ...
##  $ patid   : num  1 3 5 7 9 11 13 15 17 19 ...
##  $ time    : chr  &quot;1.8975120000000001&quot; &quot;2.927432&quot; &quot;2.2042579999999998&quot; &quot;2.1441910000000002&quot; ...
##  $ walktime: num  1.9 2.93 2.2 2.14 1.72 ...
##  - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt;</code></pre>
<pre class="r"><code>walkingdata &lt;- merge(combined, metadata, 
                by.x = &quot;patid&quot;, by.y = &quot;patient&quot;)

head(walkingdata)</code></pre>
<pre><code>##    patid   group               time walktime sex age department
## 1:     1 treated 1.8975120000000001 1.897512   M  53          3
## 2:     2 control               &lt;NA&gt; 3.537158   M  61          3
## 3:     3 treated           2.927432 2.927432   M  65          1
## 4:     4 control               &lt;NA&gt; 1.819787   M  48          2
## 5:     5 treated 2.2042579999999998 2.204258   M  62          2
## 6:     6 control               &lt;NA&gt; 3.038065   M  62          4</code></pre>
<pre class="r"><code>str(walkingdata)</code></pre>
<pre><code>## Classes &#39;data.table&#39; and &#39;data.frame&#39;:   136 obs. of  7 variables:
##  $ patid     : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ group     : chr  &quot;treated&quot; &quot;control&quot; &quot;treated&quot; &quot;control&quot; ...
##  $ time      : chr  &quot;1.8975120000000001&quot; NA &quot;2.927432&quot; NA ...
##  $ walktime  : num  1.9 3.54 2.93 1.82 2.2 ...
##  $ sex       : chr  &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; ...
##  $ age       : num  53 61 65 48 62 62 57 57 57 55 ...
##  $ department: num  3 3 1 2 2 4 2 4 3 2 ...
##  - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##  - attr(*, &quot;sorted&quot;)= chr &quot;patid&quot;</code></pre>
<pre class="r"><code>summary(walkingdata)</code></pre>
<pre><code>##      patid           group               time              walktime            sex                 age          department   
##  Min.   :  1.00   Length:136         Length:136         Min.   :  0.0154   Length:136         Min.   :45.00   Min.   :1.000  
##  1st Qu.: 34.75   Class :character   Class :character   1st Qu.:  2.1688   Class :character   1st Qu.:54.00   1st Qu.:2.000  
##  Median : 68.50   Mode  :character   Mode  :character   Median :  2.4287   Mode  :character   Median :57.00   Median :3.000  
##  Mean   : 68.52                                         Mean   :  4.1956                      Mean   :57.55   Mean   :2.596  
##  3rd Qu.:102.25                                         3rd Qu.:  2.9491                      3rd Qu.:60.25   3rd Qu.:3.250  
##  Max.   :138.00                                         Max.   :185.3620                      Max.   :72.00   Max.   :4.000  
##                                                         NA&#39;s   :1</code></pre>
</div>
<div id="describe" class="section level1" number="7">
<h1 number="7"><span class="header-section-number">7</span> Describe</h1>
<pre class="r"><code># Tidyverse
walkingdata %&gt;% 
  filter(!is.na(walktime)) %&gt;% 
  group_by(group) %&gt;% 
  summarise(Mean=mean(walktime), SD=sd(walktime))</code></pre>
<pre><code>## # A tibble: 2 x 3
##   group    Mean    SD
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1 control  5.71 22.0 
## 2 treated  2.61  2.00</code></pre>
<pre class="r"><code># data.table
walkingdata[!is.na(walktime) ,  
            .(Mean=mean(walktime), SD=sd(walktime)),
            group]</code></pre>
<pre><code>##      group     Mean        SD
## 1: treated 2.609674  1.999246
## 2: control 5.712487 22.011155</code></pre>
</div>
<div id="visualise" class="section level1" number="8">
<h1 number="8"><span class="header-section-number">8</span> Visualise</h1>
<pre class="r"><code># A very bad graph
plot(walkingdata$age , walkingdata$walktime)</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code># A better graph
ggplot(walkingdata) + 
  aes(x=age, y=walktime) + 
  geom_point()</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<pre class="r"><code># Adorn the graph
ggplot(walkingdata) + 
  aes(x=age, y=walktime) + 
  geom_point() + 
  labs(x=&quot;Age (years)&quot;, y=&quot;Time (seconds)&quot;) + 
  scale_y_log10() + 
  facet_wrap(~sex) +
  theme_bw()</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-10-3.png" width="672" /></p>
<pre class="r"><code>ggplot(walkingdata) + 
  aes(x=group, y=walktime) + 
  geom_boxplot() + 
  labs(x=&quot;Treatment group&quot;, y=&quot;Time (seconds)&quot;) + 
  scale_y_log10() + 
  facet_wrap(~sex) +
  theme_bw()</code></pre>
<pre><code>## Warning: Removed 1 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-10-4.png" width="672" /></p>
</div>
<div id="clean-data" class="section level1" number="9">
<h1 number="9"><span class="header-section-number">9</span> Clean data</h1>
<pre class="r"><code># base
walkingdata$walktime[ walkingdata$walktime &gt; 100 ] &lt;- NA
walkingdata$walktime[ walkingdata$walktime &lt; 0.1 ] &lt;- NA
# data.table
walkingdata[ walktime&gt;100 , walktime := NA]
walkingdata[ walktime&lt;0.1 , walktime := NA]</code></pre>
</div>
<div id="simple-tests" class="section level1" number="10">
<h1 number="10"><span class="header-section-number">10</span> Simple tests</h1>
<pre class="r"><code>t.test( data = walkingdata , walktime ~ group)</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  walktime by group
## t = 1.5788, df = 126.69, p-value = 0.1169
## alternative hypothesis: true difference in means between group control and group treated is not equal to 0
## 95 percent confidence interval:
##  -0.1283567  1.1413738
## sample estimates:
## mean in group control mean in group treated 
##              3.116183              2.609674</code></pre>
<pre class="r"><code>ttest1 &lt;- t.test( data = walkingdata , walktime ~ group)
ttest1$p.value</code></pre>
<pre><code>## [1] 0.1168802</code></pre>
</div>
<div id="model" class="section level1" number="11">
<h1 number="11"><span class="header-section-number">11</span> Model</h1>
<pre class="r"><code>lm1 &lt;- lm( data = walkingdata , walktime ~ group)
summary(lm1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = walktime ~ group, data = walkingdata)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.6223 -0.7297 -0.3963  0.0604 15.0317 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    3.1162     0.2257  13.806   &lt;2e-16 ***
## grouptreated  -0.5065     0.3204  -1.581    0.116    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.848 on 131 degrees of freedom
##   (3 observations deleted due to missingness)
## Multiple R-squared:  0.01872,    Adjusted R-squared:  0.01123 
## F-statistic: 2.499 on 1 and 131 DF,  p-value: 0.1163</code></pre>
<pre class="r"><code>confint(lm1)</code></pre>
<pre><code>##                  2.5 %    97.5 %
## (Intercept)   2.669671 3.5626939
## grouptreated -1.140358 0.1273411</code></pre>
</div>
<div id="diagnose" class="section level1" number="12">
<h1 number="12"><span class="header-section-number">12</span> Diagnose</h1>
<pre class="r"><code>plot(lm1)</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-14-1.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-2.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-3.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-4.png" width="672" /></p>
<pre class="r"><code>walkingdata[ , speed := 1/walktime]

lm2 &lt;- lm( data = walkingdata , log(walktime) ~ group)
lm3 &lt;- lm( data = walkingdata , 1/walktime ~ group)
plot(lm2)</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-14-5.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-6.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-7.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-8.png" width="672" /></p>
<pre class="r"><code>plot(lm3)</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-14-9.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-10.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-11.png" width="672" /><img src="workshopscript_files/figure-html/unnamed-chunk-14-12.png" width="672" /></p>
<pre class="r"><code>summary(lm3)</code></pre>
<pre><code>## 
## Call:
## lm(formula = 1/walktime ~ group, data = walkingdata)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.38121 -0.06170  0.00132  0.06453  0.30257 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   0.36681    0.01287  28.500  &lt; 2e-16 ***
## grouptreated  0.07108    0.01827   3.891 0.000158 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.1053 on 131 degrees of freedom
##   (3 observations deleted due to missingness)
## Multiple R-squared:  0.1036, Adjusted R-squared:  0.09674 
## F-statistic: 15.14 on 1 and 131 DF,  p-value: 0.0001583</code></pre>
<pre class="r"><code>gtsummary::tbl_regression(lm3)</code></pre>
<div id="aemzvkkkhm" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#aemzvkkkhm .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aemzvkkkhm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aemzvkkkhm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aemzvkkkhm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aemzvkkkhm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aemzvkkkhm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aemzvkkkhm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aemzvkkkhm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aemzvkkkhm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aemzvkkkhm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aemzvkkkhm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aemzvkkkhm .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#aemzvkkkhm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aemzvkkkhm .gt_from_md > :first-child {
  margin-top: 0;
}

#aemzvkkkhm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aemzvkkkhm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aemzvkkkhm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#aemzvkkkhm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aemzvkkkhm .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#aemzvkkkhm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aemzvkkkhm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aemzvkkkhm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aemzvkkkhm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aemzvkkkhm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aemzvkkkhm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#aemzvkkkhm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aemzvkkkhm .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#aemzvkkkhm .gt_left {
  text-align: left;
}

#aemzvkkkhm .gt_center {
  text-align: center;
}

#aemzvkkkhm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aemzvkkkhm .gt_font_normal {
  font-weight: normal;
}

#aemzvkkkhm .gt_font_bold {
  font-weight: bold;
}

#aemzvkkkhm .gt_font_italic {
  font-style: italic;
}

#aemzvkkkhm .gt_super {
  font-size: 65%;
}

#aemzvkkkhm .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">group</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">control</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">treated</td>
<td class="gt_row gt_center">0.07</td>
<td class="gt_row gt_center">0.03, 0.11</td>
<td class="gt_row gt_center"><0.001</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="augment-model" class="section level1" number="13">
<h1 number="13"><span class="header-section-number">13</span> Augment model</h1>
<pre class="r"><code>lm4 &lt;- lm( data = walkingdata , 1/walktime ~ group + age + sex + department)
gtsummary::tbl_regression(lm4)</code></pre>
<div id="rwncpgumpc" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#rwncpgumpc .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rwncpgumpc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rwncpgumpc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rwncpgumpc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rwncpgumpc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rwncpgumpc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rwncpgumpc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rwncpgumpc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rwncpgumpc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rwncpgumpc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rwncpgumpc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rwncpgumpc .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#rwncpgumpc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rwncpgumpc .gt_from_md > :first-child {
  margin-top: 0;
}

#rwncpgumpc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rwncpgumpc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rwncpgumpc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#rwncpgumpc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rwncpgumpc .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#rwncpgumpc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rwncpgumpc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rwncpgumpc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rwncpgumpc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rwncpgumpc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rwncpgumpc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#rwncpgumpc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rwncpgumpc .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#rwncpgumpc .gt_left {
  text-align: left;
}

#rwncpgumpc .gt_center {
  text-align: center;
}

#rwncpgumpc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rwncpgumpc .gt_font_normal {
  font-weight: normal;
}

#rwncpgumpc .gt_font_bold {
  font-weight: bold;
}

#rwncpgumpc .gt_font_italic {
  font-style: italic;
}

#rwncpgumpc .gt_super {
  font-size: 65%;
}

#rwncpgumpc .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">group</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">control</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">treated</td>
<td class="gt_row gt_center">0.07</td>
<td class="gt_row gt_center">0.04, 0.11</td>
<td class="gt_row gt_center"><0.001</td></tr>
    <tr><td class="gt_row gt_left">age</td>
<td class="gt_row gt_center">0.00</td>
<td class="gt_row gt_center">-0.01, 0.00</td>
<td class="gt_row gt_center">0.029</td></tr>
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">F</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">M</td>
<td class="gt_row gt_center">-0.01</td>
<td class="gt_row gt_center">-0.05, 0.03</td>
<td class="gt_row gt_center">0.6</td></tr>
    <tr><td class="gt_row gt_left">department</td>
<td class="gt_row gt_center">0.02</td>
<td class="gt_row gt_center">0.00, 0.03</td>
<td class="gt_row gt_center">0.060</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
<pre class="r"><code>lm5 &lt;- lm( data = walkingdata , 1/walktime ~ group + age + sex + factor(department))
gtsummary::tbl_regression(lm5)</code></pre>
<div id="wzrmfmpucl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wzrmfmpucl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wzrmfmpucl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wzrmfmpucl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wzrmfmpucl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wzrmfmpucl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wzrmfmpucl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wzrmfmpucl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wzrmfmpucl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wzrmfmpucl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wzrmfmpucl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wzrmfmpucl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wzrmfmpucl .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wzrmfmpucl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wzrmfmpucl .gt_from_md > :first-child {
  margin-top: 0;
}

#wzrmfmpucl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wzrmfmpucl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wzrmfmpucl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wzrmfmpucl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wzrmfmpucl .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wzrmfmpucl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wzrmfmpucl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wzrmfmpucl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wzrmfmpucl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wzrmfmpucl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wzrmfmpucl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#wzrmfmpucl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wzrmfmpucl .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#wzrmfmpucl .gt_left {
  text-align: left;
}

#wzrmfmpucl .gt_center {
  text-align: center;
}

#wzrmfmpucl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wzrmfmpucl .gt_font_normal {
  font-weight: normal;
}

#wzrmfmpucl .gt_font_bold {
  font-weight: bold;
}

#wzrmfmpucl .gt_font_italic {
  font-style: italic;
}

#wzrmfmpucl .gt_super {
  font-size: 65%;
}

#wzrmfmpucl .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">group</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">control</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">treated</td>
<td class="gt_row gt_center">0.07</td>
<td class="gt_row gt_center">0.03, 0.11</td>
<td class="gt_row gt_center"><0.001</td></tr>
    <tr><td class="gt_row gt_left">age</td>
<td class="gt_row gt_center">0.00</td>
<td class="gt_row gt_center">-0.01, 0.00</td>
<td class="gt_row gt_center">0.028</td></tr>
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">F</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">M</td>
<td class="gt_row gt_center">-0.01</td>
<td class="gt_row gt_center">-0.05, 0.04</td>
<td class="gt_row gt_center">0.7</td></tr>
    <tr><td class="gt_row gt_left">factor(department)</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2</td>
<td class="gt_row gt_center">-0.01</td>
<td class="gt_row gt_center">-0.06, 0.04</td>
<td class="gt_row gt_center">0.7</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">3</td>
<td class="gt_row gt_center">0.04</td>
<td class="gt_row gt_center">-0.01, 0.09</td>
<td class="gt_row gt_center">0.10</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">4</td>
<td class="gt_row gt_center">0.03</td>
<td class="gt_row gt_center">-0.02, 0.08</td>
<td class="gt_row gt_center">0.2</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
<pre class="r"><code>anova(lm5 , update(lm5, . ~ . -age))</code></pre>
<pre><code>## Analysis of Variance Table
## 
## Model 1: 1/walktime ~ group + age + sex + factor(department)
## Model 2: 1/walktime ~ group + sex + factor(department)
##   Res.Df    RSS Df Sum of Sq      F  Pr(&gt;F)  
## 1    126 1.3190                              
## 2    127 1.3709 -1 -0.051897 4.9574 0.02776 *
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<div id="interactions" class="section level1" number="14">
<h1 number="14"><span class="header-section-number">14</span> Interactions</h1>
<pre class="r"><code>lm6 &lt;- lm( data = walkingdata , 1/walktime ~ group*sex + age +  factor(department))

gtsummary::tbl_regression(lm6)</code></pre>
<div id="fbbtqxfbxw" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#fbbtqxfbxw .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fbbtqxfbxw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fbbtqxfbxw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fbbtqxfbxw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fbbtqxfbxw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fbbtqxfbxw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fbbtqxfbxw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fbbtqxfbxw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fbbtqxfbxw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fbbtqxfbxw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fbbtqxfbxw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fbbtqxfbxw .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#fbbtqxfbxw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fbbtqxfbxw .gt_from_md > :first-child {
  margin-top: 0;
}

#fbbtqxfbxw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fbbtqxfbxw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fbbtqxfbxw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#fbbtqxfbxw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fbbtqxfbxw .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#fbbtqxfbxw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fbbtqxfbxw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fbbtqxfbxw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fbbtqxfbxw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fbbtqxfbxw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fbbtqxfbxw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#fbbtqxfbxw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fbbtqxfbxw .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#fbbtqxfbxw .gt_left {
  text-align: left;
}

#fbbtqxfbxw .gt_center {
  text-align: center;
}

#fbbtqxfbxw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fbbtqxfbxw .gt_font_normal {
  font-weight: normal;
}

#fbbtqxfbxw .gt_font_bold {
  font-weight: bold;
}

#fbbtqxfbxw .gt_font_italic {
  font-style: italic;
}

#fbbtqxfbxw .gt_super {
  font-size: 65%;
}

#fbbtqxfbxw .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Beta</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">group</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">control</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">treated</td>
<td class="gt_row gt_center">0.05</td>
<td class="gt_row gt_center">-0.02, 0.12</td>
<td class="gt_row gt_center">0.14</td></tr>
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">F</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">M</td>
<td class="gt_row gt_center">-0.02</td>
<td class="gt_row gt_center">-0.08, 0.04</td>
<td class="gt_row gt_center">0.5</td></tr>
    <tr><td class="gt_row gt_left">age</td>
<td class="gt_row gt_center">0.00</td>
<td class="gt_row gt_center">-0.01, 0.00</td>
<td class="gt_row gt_center">0.029</td></tr>
    <tr><td class="gt_row gt_left">factor(department)</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">1</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">2</td>
<td class="gt_row gt_center">-0.01</td>
<td class="gt_row gt_center">-0.07, 0.04</td>
<td class="gt_row gt_center">0.6</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">3</td>
<td class="gt_row gt_center">0.04</td>
<td class="gt_row gt_center">-0.01, 0.09</td>
<td class="gt_row gt_center">0.10</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">4</td>
<td class="gt_row gt_center">0.03</td>
<td class="gt_row gt_center">-0.02, 0.08</td>
<td class="gt_row gt_center">0.2</td></tr>
    <tr><td class="gt_row gt_left">group * sex</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">treated * M</td>
<td class="gt_row gt_center">0.03</td>
<td class="gt_row gt_center">-0.05, 0.11</td>
<td class="gt_row gt_center">0.5</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
<pre class="r"><code>anova( lm5 , lm6 )</code></pre>
<pre><code>## Analysis of Variance Table
## 
## Model 1: 1/walktime ~ group + age + sex + factor(department)
## Model 2: 1/walktime ~ group * sex + age + factor(department)
##   Res.Df    RSS Df Sum of Sq      F Pr(&gt;F)
## 1    126 1.3190                           
## 2    125 1.3148  1 0.0042764 0.4066 0.5249</code></pre>
<pre class="r"><code>library(emmeans)
emmeans(lm6, pairwise ~ group | sex)</code></pre>
<pre><code>## $emmeans
## sex = F:
##  group   emmean     SE  df lower.CL upper.CL
##  control  0.379 0.0246 125    0.330    0.428
##  treated  0.430 0.0260 125    0.379    0.482
## 
## sex = M:
##  group   emmean     SE  df lower.CL upper.CL
##  control  0.359 0.0151 125    0.330    0.389
##  treated  0.436 0.0150 125    0.407    0.466
## 
## Results are averaged over the levels of: department 
## Confidence level used: 0.95 
## 
## $contrasts
## sex = F:
##  contrast          estimate     SE  df t.ratio p.value
##  control - treated  -0.0513 0.0346 125  -1.481  0.1411
## 
## sex = M:
##  contrast          estimate     SE  df t.ratio p.value
##  control - treated  -0.0771 0.0211 125  -3.654  0.0004
## 
## Results are averaged over the levels of: department</code></pre>
<pre class="r"><code>treatmentestimates &lt;- as.data.frame(confint(emmeans(lm6, pairwise ~ group | sex)$contrast))</code></pre>
<pre class="r"><code>g1 &lt;- ggplot(treatmentestimates) + aes(x=sex, y=estimate, ymin=lower.CL, ymax=upper.CL) + 
  geom_point() + 
  geom_errorbar(width=0.2) + 
  geom_hline(yintercept = 0) + 
  theme_bw() + 
  labs(x=&quot;Sex&quot;, y=&quot;Treatment effect&quot;) 
  
g1 </code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code>g1 + coord_flip()</code></pre>
<p><img src="workshopscript_files/figure-html/unnamed-chunk-17-2.png" width="672" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
